# airo

Spec-first Golang project scaffold generator

## Key features
- **OpenAPI first** – start with a spec, everything else is generated around it.
- **Code generation with [ogen-go/ogen]** – type-safe request/response models & router.
- **Dependency injection via [rom8726/di]** – constructor-based DI.
- **Batteries included**
  - PostgreSQL integration
  - Redis integration (optional)
  - Health-check, Prometheus metrics, pprof endpoints
  - Structured logging with slog
- **CLI powered by [spf13/cobra]**
- **12-factor config** – environment variables parsed with `envconfig`, `.env` supported.

## Quick start
```bash
# Install the generator binary
go install github.com/rom8726/airo/cmd/airo@latest

# Run the TUI
airo generate
```
The wizard will ask:

1. Project name (folder will be created in the current directory)
2. Go module path (e.g. `github.com/acme/myservice`)
3. Path to OpenAPI specification (YAML or JSON)
4. Database choice (currently only **PostgreSQL**)
5. Additional infrastructure (currently **Redis**)

After confirmation, the scaffold is generated.

### Minimal OpenAPI example
If you don’t have a spec yet, start with the included template `example/server.yml` or something like this:
```yaml
openapi: 3.1.0
info:
  title: Example API
  version: 1.0.0
paths:
  /ping:
    get:
      summary: Ping-pong endpoint
      operationId: ping
      responses:
        '200':
          description: pong
          content:
            text/plain:
              schema:
                type: string
```
## Generated layout
```
myservice/
├── cmd/
│   └── server/              # server command
├── internal/
│   ├── api/
│   │   └── rest/            # your handlers (interfaces generated by ogen)
│   ├── generated/           # ogen output (do not edit)
│   ├── config/              # env-config structs & helpers
│   └── app.go               # app, db, redis, etc.
├── pkg/                     # reusable packages
├── main.go
└── go.mod
```
### Running the generated service

Create/adjust `.env` (or pass variables directly):
```dotenv
API_SERVER_ADDR=:8080
TECH_SERVER_ADDR=:9090

POSTGRES_USER=postgres
POSTGRES_PASSWORD=secret
POSTGRES_HOST=localhost:5432
POSTGRES_DATABASE=mydb

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
```

```bash
cd myservice
go run ./cmd/server --env-file=.env
```
Available endpoints:

- `GET /ping` – from your OpenAPI spec
- `GET /health` – liveness probe
- `GET /metrics` – Prometheus metrics
- `GET /debug/pprof/*` – pprof profiles

---

Apache 2.0 License
